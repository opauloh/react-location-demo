!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReactLocation={},t.React)}(this,(function(t,e){"use strict";function n(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var r=n(e);function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function u(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}var l,f=l||(l={});f.Pop="POP",f.Push="PUSH",f.Replace="REPLACE";function h(t){t.preventDefault(),t.returnValue=""}function d(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function v(t){var e=t.pathname,n=t.search;return(void 0===e?"/":e)+(void 0===n?"":n)+(void 0===(t=t.hash)?"":t)}function m(t){var e={};if(t){var n=t.indexOf("#");0<=n&&(e.hash=t.substr(n),t=t.substr(0,n)),0<=(n=t.indexOf("?"))&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function g(t){function e(){var t=i.location,e=u.state||{};return[e.idx,{pathname:t.pathname,search:t.search,hash:t.hash,state:e.usr||null,key:e.key||"default"}]}function n(t){return"string"==typeof t?t:v(t)}function r(t,e){return void 0===e&&(e=null),s({},y,"string"==typeof t?m(t):t,{state:e,key:p()})}function a(t){f=t,t=e(),g=t[0],y=t[1],b.call({action:f,location:y})}function o(t){u.go(t)}void 0===t&&(t={});var i=void 0===(t=t.window)?document.defaultView:t,u=i.history,c=null;i.addEventListener("popstate",(function(){if(c)P.call(c),c=null;else{var t=l.Pop,n=e(),r=n[0];if(n=n[1],P.length){if(null!=r){var i=g-r;i&&(c={action:t,location:n,retry:function(){o(-1*i)}},o(i))}}else a(t)}}));var f=l.Pop,g=(t=e())[0],y=t[1],b=d(),P=d();return null==g&&(g=0,u.replaceState(s({},u.state,{idx:g}),"")),{get action(){return f},get location(){return y},createHref:n,push:function t(e,o){var c=l.Push,s=r(e,o);if(!P.length||(P.call({action:c,location:s,retry:function(){t(e,o)}}),0)){var f=[{usr:s.state,key:s.key,idx:g+1},n(s)];s=f[0],f=f[1];try{u.pushState(s,"",f)}catch(t){i.location.assign(f)}a(c)}},replace:function t(e,o){var i=l.Replace,c=r(e,o);P.length&&(P.call({action:i,location:c,retry:function(){t(e,o)}}),1)||(c=[{usr:c.state,key:c.key,idx:g},n(c)],u.replaceState(c[0],"",c[1]),a(i))},go:o,back:function(){o(-1)},forward:function(){o(1)},listen:function(t){return b.push(t)},block:function(t){var e=P.push(t);return 1===P.length&&i.addEventListener("beforeunload",h),function(){e(),P.length||i.removeEventListener("beforeunload",h)}}}}function y(t){function e(t,e){return void 0===e&&(e=null),s({},f,"string"==typeof t?m(t):t,{state:e,key:p()})}function n(t,e,n){return!g.length||(g.call({action:t,location:e,retry:n}),!1)}function r(t,e){c=t,f=e,h.call({action:c,location:f})}function a(t){var e=Math.min(Math.max(u+t,0),i.length-1),o=l.Pop,c=i[e];n(o,c,(function(){a(t)}))&&(u=e,r(o,c))}void 0===t&&(t={});var o=t;t=o.initialEntries,o=o.initialIndex;var i=(void 0===t?["/"]:t).map((function(t){return s({pathname:"/",search:"",hash:"",state:null,key:p()},"string"==typeof t?m(t):t)})),u=Math.min(Math.max(null==o?i.length-1:o,0),i.length-1),c=l.Pop,f=i[u],h=d(),g=d();return{get index(){return u},get action(){return c},get location(){return f},createHref:function(t){return"string"==typeof t?t:v(t)},push:function t(a,o){var c=l.Push,s=e(a,o);n(c,s,(function(){t(a,o)}))&&(u+=1,i.splice(u,i.length,s),r(c,s))},replace:function t(a,o){var c=l.Replace,s=e(a,o);n(c,s,(function(){t(a,o)}))&&(i[u]=s,r(c,s))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(t){return h.push(t)},block:function(t){return g.push(t)}}}var b=["children","location"],P=["to","search","hash","children","target","style","replace","onClick","onMouseEnter","className","getActiveProps","activeOptions","preload","disabled","_ref"],M=["style","className"],x=["pending"],E=["children"],w=r.createContext(null),k=r.createContext(null),L=r.createContext(null),O=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),R=O?r.useLayoutEffect:r.useEffect,A=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(t){var e=this;return this.listeners.push(t),function(){e.listeners=e.listeners.filter((function(e){return e!==t}))}},e.notify=function(t){this.listeners.forEach((function(e){return e(t)}))},t}(),S=function(t){function e(e){var n,r,a;return(a=t.call(this)||this).isTransitioning=!1,a.history=(null==e?void 0:e.history)||(O?g():y()),a.stringifySearch=null!=(n=null==e?void 0:e.stringifySearch)?n:rt,a.parseSearch=null!=(r=null==e?void 0:e.parseSearch)?r:at,a.current=a.parseLocation(a.history.location),a.destroy=a.history.listen((function(t){a.current=a.parseLocation(t.location,a.current),a.notify()})),a}o(e,t);var n=e.prototype;return n.buildNext=function(t,e){var n,r,o;void 0===t&&(t="/"),void 0===e&&(e={});var i=a({},this.current,e.from),u=Z(t,i.pathname,""+(null!=(n=e.to)?n:".")),c=null!=(r=!0===e.search?i.search:W(e.search,i.search))?r:{},s=null!=(o=e.__searchFilters)&&o.length?e.__searchFilters.reduce((function(t,e){return e(t,c)}),i.search):c,l=tt(i.search,s),f=this.stringifySearch(l),h=W(e.hash,i.hash);return{pathname:u,search:l,searchStr:f,hash:h=h?"#"+h:"",href:""+u+f+h,key:e.key}},n.navigate=function(t,e){var n=this;this.current=t,this.navigateTimeout&&clearTimeout(this.navigateTimeout);var r="replace";this.nextAction||(r=e?"replace":"push"),e||(r="push"),this.nextAction=r,this.navigateTimeout=setTimeout((function(){var t=n.nextAction;return delete n.nextAction,n.parseLocation(n.history.location).href===n.current.href&&!n.current.key&&(t="replace"),"replace"===t?n.history.replace({pathname:n.current.pathname,hash:n.current.hash,search:n.current.searchStr}):n.history.push({pathname:n.current.pathname,hash:n.current.hash,search:n.current.searchStr})}),16)},n.parseLocation=function(t,e){var n,r=this.parseSearch(t.search);return{pathname:t.pathname,searchStr:t.search,search:tt(null==e?void 0:e.search,r),hash:null!=(n=t.hash.split("#").reverse()[0])?n:"",href:""+t.pathname+t.search+t.hash,key:t.key}},e}(A);function j(t){return r.createElement(k.Provider,t)}var C=function(t){function e(e){var n,r,o;return(o=t.call(this)||this).setState=function(t){var e=t({state:o.state,pending:o.pending});o.state=e.state,o.pending=e.pending,o.cleanMatchCache(),o.notify()},o.matchCache={},o.getMatchLoader=function(t){return new N(c(o),t)},o.cleanMatchCache=function(){var t,e,n,r,a,i=[].concat(null!=(t=null==(e=c(o))?void 0:e.state.matches)?t:[],null!=(n=null==(r=c(o))||null==(a=r.pending)?void 0:a.matches)?n:[]).map((function(t){return t.id}));Object.values(o.matchCache).forEach((function(t){var e;if(t.updatedAt&&!i.includes(t.id)){var n=Date.now()-(null!=(e=t.updatedAt)?e:0);(!t.maxAge||n>t.maxAge)&&delete o.matchCache[t.id]}}))},o.updateLocation=function(t){var e;return{promise:new Promise((function(n){var r,i=o.getMatchLoader(t);null==(r=o.state.matches)||r.forEach((function(t){t.used=!0})),o.setState((function(t){return a({},t,{pending:{status:"pending",location:i.location,matches:i.matches}})})),e=i.subscribe((function(){var t=o.state.matches;t.filter((function(t){return!i.matches.find((function(e){return e.id===t.id}))})).forEach((function(t){null==t.onExit||t.onExit(t)})),t.filter((function(t){return i.matches.find((function(e){return e.id===t.id}))})).forEach((function(t){null==t.route.onTransition||t.route.onTransition(t)})),i.matches.filter((function(e){return!t.find((function(t){return t.id===e.id}))})).forEach((function(t){t.onExit=null==t.route.onMatch?void 0:t.route.onMatch(t)})),o.setState((function(t){return a({},t,{state:{status:"ready",location:i.location,matches:i.matches},pending:void 0})})),n()})),i.loadData(),i.startPending()})),unsubscribe:e}},Object.assign(c(o),e),o.basepath=Q("/"+(null!=(n=e.basepath)?n:"")),o.rootMatch={id:"root",params:{},search:{},routeIndex:0,pathname:o.basepath,route:null,data:{},isLoading:!1,status:"resolved"},o.state={status:"ready",location:e.location.current,matches:null!=(r=e.initialMatches)?r:[]},e.location.subscribe((function(){return o.notify()})),o}return o(e,t),e}(A);function T(){var t,e=(t=r.useRef(!1),r.useEffect((function(){return t.current=!0,function(){t.current=!1}})),function(){return t.current}),n=r.useReducer((function(t){return t+1}),0)[1],a=r.useContext(w);return R((function(){return a.subscribe((function(){Promise.resolve().then((function(){setTimeout((function(){e()&&n()}),0)}))}))}),[a]),a}var _=function(t){var e=this;this.status="pending",this.data={},this.isLoading=!1,this.notify=function(t){var n;null==(n=e.matchLoader)||n.notify(t)},this.assignMatchLoader=function(t){e.matchLoader=t},this.startPending=function(){e.pendingTimeout&&clearTimeout(e.pendingTimeout),e.route.pendingMs&&(e.pendingTimeout=setTimeout((function(){null==e.notify||e.notify(),void 0!==e.route.pendingMinMs&&(e.pendingMinPromise=new Promise((function(t){return setTimeout(t,e.route.pendingMinMs)})))}),e.route.pendingMs))},this.load=function(t){var n,r;if(e.maxAge=null!=(n=null!=(r=t.maxAge)?r:e.route.loaderMaxAge)?n:t.router.defaultLoaderMaxAge,!e.loaderPromise){var o=e.route.import;e.loaderPromise=(o?o({params:e.params,search:e.search}).then((function(t){e.route=a({},e.route,t)})):Promise.resolve()).then((function(){var n=[];["element","errorElement","pendingElement"].forEach((function(t){var r=e.route[t];e[t]||("function"==typeof r?n.push(r(e).then((function(n){e[t]=n}))):e[t]=e.route[t])}));var r=e.route.loader,a=r?new Promise((function(n,a){return new Promise((function(o,i){var u,c,s;u=function(t){e.status="resolved",e.data=t,e.error=void 0},c=function(t){console.error(t),e.status="rejected",e.error=t,a(t)},s=function(){e.isLoading=!1,e.startPending=void 0,clearTimeout(undefined),n(e.data)};var l=function(){try{return o()}catch(t){return i(t)}},f=function(t){try{return c(t),s(),l()}catch(t){return i(t)}};try{return e.isLoading=!0,Promise.resolve(r(e,{parentMatch:t.parentMatch,dispatch:function(t){return new Promise((function(n,r){return"resolve"===t.type?u(t.data):"reject"===t.type?c(t.error):"loading"===t.type?e.isLoading=!0:"maxAge"===t.type&&(e.maxAge=t.maxAge),e.updatedAt=Date.now(),null==e.notify||e.notify(!0),n()}))}})).then((function(t){try{return u(t),Promise.resolve(e.pendingMinPromise).then((function(t){try{return s(),l()}catch(t){return f(t)}}),f)}catch(t){return f(t)}}),f)}catch(t){f(t)}}))})):Promise.resolve().then((function(){e.status="resolved"}));return Promise.all([].concat(n,[a])).then((function(){e.updatedAt=Date.now()}))})).then((function(){return e.data}))}},Object.assign(this,t)},N=function(t){function e(e,n){var r;return(r=t.call(this)||this).status="pending",r.preNotify=function(t){var e;"pending"===r.status&&t||(r.status="resolved",null==(e=r.matches)||e.forEach((function(t,e){var n,o,i=null==(n=r.matches)?void 0:n[e-1];t.data=a({},null!=(o=null==i?void 0:i.data)?o:{},t.data)})),r.notify(!1))},r.loadMatches=function(){var t=H(r.router,r.location);r.matches=null==t?void 0:t.map((function(t){return r.router.matchCache[t.id]||(r.router.matchCache[t.id]=new _(t)),r.router.matchCache[t.id]}))},r.loadData=function(t){return new Promise((function(e,n){var a,o;return o=(void 0===t?{}:t).maxAge,r.loadMatches(),r.router.cleanMatchCache(),null!=(a=r.matches)&&a.length?(r.firstRenderPromises=[],r.matches.forEach((function(t,e){var n,a,i=null==(n=r.matches)?void 0:n[e-1];null==t.assignMatchLoader||t.assignMatchLoader(c(r)),null==t.load||t.load({maxAge:o,parentMatch:i,router:r.router}),null==(a=r.firstRenderPromises)||a.push(t.loaderPromise)})),Promise.resolve(Promise.all(r.firstRenderPromises).then((function(){return r.preNotify(),r.matches}))).then(e,n)):(r.preNotify(),e())}))},r.load=function(t){return new Promise((function(e,n){var a;return a=(void 0===t?{}:t).maxAge,r.loadMatches(),Promise.resolve(r.loadData({maxAge:a})).then(e,n)}))},r.startPending=function(){return new Promise((function(t,e){return r.matches.forEach((function(t){return null==t.startPending?void 0:t.startPending()})),t()}))},r.router=e,r.location=n,r.matches=[],r.loadMatches(),r}return o(e,t),e}(A);function D(){var t=r.useContext(L);if(!t)throw new Error;return t.router}function H(t,e){var n;if(null==(n=t.routes)||!n.length)return[];var r=[];return function n(o,i){return new Promise((function(u,c){var s,l,f,h=i.pathname,d=i.params,p=null!=t&&t.filterRoutes?null==t?void 0:t.filterRoutes(o):o,v=-1,m=p.find((function(t,n){var r,o=G([h,t.path]),i=!!("/"!==t.path||null!=(r=t.children)&&r.length),u=V(e,{to:o,search:t.search,fuzzy:i});return u&&(v=n,d=a({},d,u)),!!u}));if(!m)return u();var g=G(Y(m.path).map((function(t){return"*"===t.value?"":"param"===t.type?null!=(e=d[t.value.substring(1)])?e:"":t.value;var e})));h=G([h,g]);var y={id:G(["root"===i.id?"":i.id,g+"-"+v.toString()]),route:a({},m,{pendingMs:null!=(s=m.pendingMs)?s:null==t?void 0:t.defaultPendingMs,pendingMinMs:null!=(l=m.pendingMinMs)?l:null==t?void 0:t.defaultPendingMinMs}),routeIndex:v,params:d,pathname:h,search:e.search};return r.push(y),null!=(f=m.children)&&f.length&&n(m.children,y),u()}))}(t.routes,t.rootMatch),r}function B(){var t=T(),e=F(),n=D(),r=U();return $((function(o,i){return new Promise((function(u,c){var s,l,f;return void 0===o&&(o=t.current),l=r(a({},o,{from:null!=(s=o.from)?s:{pathname:e.pathname}})),f=n.getMatchLoader(l),Promise.resolve(f.load(i)).then(u,c)}))}))}function z(){return r.useContext(k)}function F(){var t;return null==(t=z())?void 0:t[0]}function I(){var t=T(),e=F(),n=U();return $((function(r){var a,o=r.search,i=r.hash,u=r.replace,c=r.from,s=r.to,l=r.fromCurrent;l=null!=(a=l)?a:void 0===s;var f=n({to:s,search:o,hash:i,from:l?t.current:null!=c?c:{pathname:e.pathname}});t.navigate(f,u)}))}function U(){var t=T(),e=D();return $((function(n){var r=t.buildNext(e.basepath,n),o=H(e,r).map((function(t){var e;return null!=(e=t.route.searchFilters)?e:[]})).flat().filter(Boolean);return t.buildNext(e.basepath,a({},n,{__searchFilters:o}))}))}function K(){var t=D(),e=F();return $((function(n){return Z(t.basepath,e.pathname,Q(n))}))}function V(t,e){var n=X(t,e),r=function(t,e){return!(!e.search||!e.search(t.search))}(t,e);if((!e.to||n)&&(!e.search||r))return null!=n?n:{}}function q(){var t=D(),e=K();return $((function(n){var r=n.pending,o=u(n,x);if(o=a({},o,{to:o.to?e(""+o.to):void 0}),r){var i;if(null==(i=t.pending)||!i.location)return;return V(t.pending.location,o)}return V(t.state.location,o)}))}function J(t,e){var n=T();r.useEffect((function(){if(e){var r=n.history.block((function(e){window.confirm(t)?(r(),e.retry()):n.current.pathname=window.location.pathname}));return r}}),[e,n,t])}function W(t,e){return"function"==typeof t?t(e):t}function G(t){return Q(t.filter(Boolean).join("/"))}function Q(t){return(""+t).replace(/\/{2,}/g,"/")}function X(t,e){var n,r=Y(t.pathname),a=Y(""+(null!=(n=e.to)?n:"*")),o={};return function(){for(var t=0;t<Math.max(r.length,a.length);t++){var n=r[t],i=a[t],u=t===a.length-1,c=t===r.length-1;if(i){if("wildcard"===i.type)return!(null==n||!n.value)&&(o["*"]=G(r.slice(t).map((function(t){return t.value}))),!0);if("pathname"===i.type){if("/"===i.value&&(null==n||!n.value))return!0;if(n&&i.value!==n.value)return!1}if(!n)return!1;"param"===i.type&&(o[i.value.substring(1)]=n.value)}if(u&&!c)return!!e.fuzzy}return!0}()?o:void 0}function Y(t){if(!t)return[];var e=[];if("/"===(t=Q(t)).slice(0,1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;var n=t.split("/").filter(Boolean);return e.push.apply(e,n.map((function(t){return t.startsWith("*")?{type:"wildcard",value:t}:":"===t.charAt(0)?{type:"param",value:t}:{type:"pathname",value:t}}))),"/"===t.slice(-1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Z(t,e,n){e=e.replace(new RegExp("^"+t),"/"),n=n.replace(new RegExp("^"+t),"/");var r=Y(e);return Y(n).forEach((function(t,e){if("/"===t.value)e||(r=[t]);else if(".."===t.value)r.pop();else{if("."===t.value)return;r.push(t)}})),Q(G([t].concat(r.map((function(t){return t.value})))))}function $(t){var e=r.useRef(),n=r.useRef(t);return n.current=t,e.current||(e.current=function(){return n.current.apply(n,arguments)}),e.current}function tt(t,e){if(t===e)return t;var n=Array.isArray(t)&&Array.isArray(e);if(n||et(t)&&et(e)){for(var r=n?t.length:Object.keys(t).length,a=n?e:Object.keys(e),o=a.length,i=n?[]:{},u=0,c=0;c<o;c++){var s=n?c:a[c];i[s]=tt(t[s],e[s]),i[s]===t[s]&&u++}return r===o&&u===r?t:i}return e}function et(t){if(!nt(t))return!1;var e=t.constructor;if(void 0===e)return!0;var n=e.prototype;return!!nt(n)&&!!n.hasOwnProperty("isPrototypeOf")}function nt(t){return"[object Object]"===Object.prototype.toString.call(t)}function rt(t){(t=a({},t))&&Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n||void 0===n)delete t[e];else if(n&&"object"==typeof n&&null!==n)try{t[e]=JSON.stringify(n)}catch(t){}}));var e=new URLSearchParams(t).toString();return e?"?"+e:""}function at(t){"?"===t.substring(0,1)&&(t=t.substring(1));var e=Object.fromEntries(new URLSearchParams(t).entries());for(var n in e){var r=e[n];try{e[n]=JSON.parse(r)}catch(t){}}return e}t.Link=function(t){var e,n=t.to,o=void 0===n?".":n,i=t.search,c=t.hash,s=t.children,l=t.target,f=t.style,h=void 0===f?{}:f,d=t.replace,p=t.onClick,v=t.onMouseEnter,m=t.className,g=void 0===m?"":m,y=t.getActiveProps,b=void 0===y?function(){return{}}:y,x=t.activeOptions,E=t.preload,w=t.disabled,k=t._ref,L=u(t,P),O=B(),R=F(),A=T(),S=D(),j=I(),C=U();E=null!=(e=E)?e:S.defaultLinkPreloadMaxAge;try{new URL(""+o)}catch(t){}var _=C({to:o,search:i,hash:c,from:{pathname:R.pathname}}),N=A.current.pathname===_.pathname,H=A.current.pathname.split("/"),z=_.pathname.split("/").every((function(t,e){return t===H[e]})),K=A.current.hash===_.hash,V=null!=x&&x.exact?N:z,q=null==x||!x.includeHash||K,J=V&&q,W=J?b():{},G=W.style,Q=void 0===G?{}:G,X=W.className,Y=void 0===X?"":X,Z=u(W,M);return r.createElement("a",a({ref:k,href:w?void 0:_.href,onClick:function(t){p&&p(t),function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||t.defaultPrevented||l&&"_self"!==l||0!==t.button||(t.preventDefault(),j({to:o,search:i,hash:c,replace:d,from:{pathname:R.pathname}}))},onMouseEnter:function(t){v&&v(t),E&&E>0&&O({to:o,search:i,hash:c},{maxAge:E})},target:l,style:a({},h,Q),className:[g,Y].filter(Boolean).join(" ")||void 0},w?{role:"link","aria-disabled":!0}:void 0,L,Z,{children:"function"==typeof s?s({isActive:J}):s}))},t.MatchRoute=function(t){var e=t.children,n=u(t,E),r=q()(n);return"function"==typeof e?e(r):r?e:null},t.MatchesProvider=j,t.Navigate=function(t){var e=I();return R((function(){e(t)}),[e]),null},t.Outlet=function t(){var e,n=D(),a=z();a[0];var o=a.slice(1),i=o[0];if(!i)return null;var u=null!=(e=i.errorElement)?e:n.defaultErrorElement,c=function(){var e,a;if("rejected"===i.status){if(u)return u;if(!n.useErrorBoundary)return"An unknown error occured!";throw i.error}var o=null!=(e=i.pendingElement)?e:n.defaultPendingElement;if("pending"===i.status&&(i.route.pendingMs||o))return null!=o?o:null;var c=null!=(a=i.element)?a:n.defaultElement;return c?r.createElement(r.Fragment,null,c):r.createElement(t,null)}();return r.createElement(j,{value:o},c)},t.Prompt=function(t){var e=t.message,n=t.when,r=t.children;return J(e,null==n||n),null!=r?r:null},t.ReactLocation=S,t.RouteMatch=_,t.Router=function(t){var e=t.children,n=t.location,o=u(t,b),i=r.useRef(null);i.current||(i.current=new C(a({},o,{location:n})));var c=i.current,s=r.useReducer((function(){return{}}),{}),l=s[0],f=s[1];R((function(){return c.subscribe(f)}),[]),R((function(){return c.updateLocation(n.current).unsubscribe}),[n.current.key]);var h=r.useMemo((function(){return{router:c}}),[l]);return r.createElement(w.Provider,{value:n},r.createElement(L.Provider,{value:h},r.createElement(j,{value:[c.rootMatch].concat(c.state.matches)},e)))},t.RouterInstance=C,t.cleanPath=Q,t.createBrowserHistory=g,t.createHashHistory=function(t){function e(){var t=m(u.location.hash.substr(1)),e=t.pathname,n=t.search;t=t.hash;var r=c.state||{};return[r.idx,{pathname:void 0===e?"/":e,search:void 0===n?"":n,hash:void 0===t?"":t,state:r.usr||null,key:r.key||"default"}]}function n(){if(f)M.call(f),f=null;else{var t=l.Pop,n=e(),r=n[0];if(n=n[1],M.length){if(null!=r){var a=y-r;a&&(f={action:t,location:n,retry:function(){i(-1*a)}},i(a))}}else o(t)}}function r(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=-1===(n=(e=u.location.href).indexOf("#"))?e:e.slice(0,n)),n+"#"+("string"==typeof t?t:v(t))}function a(t,e){return void 0===e&&(e=null),s({},b,"string"==typeof t?m(t):t,{state:e,key:p()})}function o(t){g=t,t=e(),y=t[0],b=t[1],P.call({action:g,location:b})}function i(t){c.go(t)}void 0===t&&(t={});var u=void 0===(t=t.window)?document.defaultView:t,c=u.history,f=null;u.addEventListener("popstate",n),u.addEventListener("hashchange",(function(){v(e()[1])!==v(b)&&n()}));var g=l.Pop,y=(t=e())[0],b=t[1],P=d(),M=d();return null==y&&(y=0,c.replaceState(s({},c.state,{idx:y}),"")),{get action(){return g},get location(){return b},createHref:r,push:function t(e,n){var i=l.Push,s=a(e,n);if(!M.length||(M.call({action:i,location:s,retry:function(){t(e,n)}}),0)){var f=[{usr:s.state,key:s.key,idx:y+1},r(s)];s=f[0],f=f[1];try{c.pushState(s,"",f)}catch(t){u.location.assign(f)}o(i)}},replace:function t(e,n){var i=l.Replace,u=a(e,n);M.length&&(M.call({action:i,location:u,retry:function(){t(e,n)}}),1)||(u=[{usr:u.state,key:u.key,idx:y},r(u)],c.replaceState(u[0],"",u[1]),o(i))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(t){return P.push(t)},block:function(t){var e=M.push(t);return 1===M.length&&u.addEventListener("beforeunload",h),function(){e(),M.length||u.removeEventListener("beforeunload",h)}}}},t.createMemoryHistory=y,t.defaultParseSearch=at,t.defaultStringifySearch=rt,t.functionalUpdate=W,t.matchByPath=X,t.matchRoute=V,t.matchRoutes=H,t.parsePathname=Y,t.useLoadRoute=B,t.useLocation=T,t.useMatch=F,t.useMatchRoute=q,t.useMatches=z,t.useNavigate=I,t.useParentMatches=function(){var t=D(),e=F(),n=t.state.matches;return n.slice(0,n.findIndex((function(t){return t.id===e.id}))-1)},t.usePrompt=J,t.useResolvePath=K,t.useRouter=D,t.useSearch=function(){return T().current.search},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=react-location.production.min.js.map
